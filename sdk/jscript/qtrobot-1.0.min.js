class QTrobot{constructor(e){this.url=e&&e.url?e.url:null,this.reconnect_time=e&&e.reconnect_time?e.reconnect_time:5e3,this.callbacks={},this.callbacks.connection=e&&e.connection?e.connection:null,this.callbacks.close=e&&e.close?e.close:null,this.callbacks.error=e&&e.error?e.error:null,this.connect()}close(){this.ros=null}connect(){var e=this;e.ros=null,e.ros=new ROSLIB.Ros({url:e.url}),e.ros.on("connection",function(){e.ros&&e.callbacks.connection&&e.callbacks.connection()}),e.ros.on("error",function(o){e.callbacks.error&&e.callbacks.error(o)}),e.ros.on("close",function(){e.ros&&(e.callbacks.close&&e.callbacks.close(),setTimeout(()=>{e.ros.connect(e.url)},e.reconnect_time))})}call_service(e,o,t,l=null){var r=new ROSLIB.Service({ros:this.ros,name:e,serviceType:o}),s=new ROSLIB.ServiceRequest(t);r.callService(s,function(e){l&&l(e)})}publish(e,o,t){var l=new ROSLIB.Topic({ros:this.ros,name:e,messageType:o}),r=new ROSLIB.Message(t);l.publish(r)}subscribe(e,o,t=null){var l=new ROSLIB.Topic({ros:this.ros,name:e,messageType:o});l.subscribe(function(e){t&&t(e),l.unsubscribe()})}show_emotion(e,o=null){this.call_service("/qt_robot/emotion/show","qt_robot_interface/emotion_show",{name:e},o)}play_gesture(e,o=null){this.call_service("/qt_robot/gesture/play","qt_gesture_controller/gesture_play",{name:e},o)}set_volume(e,o=null){var t=[0,2,3,3,4,5,6,7,10,11,13,16,20,24,30,26,44,54,67,82,100],l=0;for(l=0;l<t.length&&e>=t[l];l++);var r=Math.round((l-1)/(t.length-1)*100);this.call_service("/qt_robot/setting/setVolume","qt_robot_interface/setting_setVolume",{volume:r},o)}home_motors(e=null){this.call_service("/qt_robot/motors/home","qt_motors_controller/home",{parts:["head","right_arm","left_arm"]},e)}say_text(e,o=null){this.call_service("/qt_robot/speech/say","qt_robot_interface/speech_say",{message:e},o)}configure_tts(e="default",o=0,t=0,l=null){this.call_service("/qt_robot/speech/config","qt_robot_interface/speech_config",{language:e,pitch:o,speed:t},l)}play_audio(e,o="",t=null){this.call_service("/qt_robot/audio/play","qt_robot_interface/audio_play",{filename:e,filepath:o},t)}talk_text(e,o=null){this.call_service("/qt_robot/behavior/talkText","qt_robot_interface/behavior_talk_text",{message:e},o)}talk_audio(e,o="",t=null){this.call_service("/qt_robot/behavior/talkAudio","qt_robot_interface/behavior_talk_audio",{filename:e,filepath:o},t)}}